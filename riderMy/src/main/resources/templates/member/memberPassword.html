<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head th:replace="fragments/head :: headFrament"></head>
<th:block layout:fragment="customContents">
	<div class="container mt-5">
		<!-- row -->
		<div class="row tm-content-row">
			<div class="col-xl-6 mx-auto tm-block-col tm-col-account-settings">
				<div class="tm-bg-primary-dark tm-block tm-block-settings">
					<!------------------------------ 19.09.18작성 비밀번호 수정화면 팝업 --------------------------------->
					<h2 class="tm-block-title">비밀번호 변경</h2>
					<form action="/updatePassword" class="tm-signup-form" method="post" onsubmit="return sendIt();">
						<input type="hidden" id="memberId" name="memberId" th:value="${memberId}">
						<div class="form-group">
							<label for="password">현재 비밀번호</label>
							<input id="memberPw" name="memberPw" type="password" class="form-control validate"
								   placeholder="PASSWORD" required="required"/>
						</div>
						<div>
							<label class="alert alert-danger col-xl" th:if="${result ne null}" th:text="${result}">
							</label>
						</div>
						<div class="form-group">
							<label for="password">새 비밀번호</label>
							<input id="memberPw2" name="memberPw2" type="password" class="form-control validate"
								   placeholder="NEW PASSWORD" required="required"/>
						</div>
						<div class="form-group">
							<label for="password">새 비밀번호 확인</label>
							<input id="memberPw3" name="memberPw3" type="password" class="form-control validate"
								   placeholder="NEW PASSWORD" required="required"/>
						</div>
						<div class="form-group">
							<label>&nbsp;</label>
							<button type="submit" class="btn btn-primary btn-block text-uppercase" onclick="sendIt()">
								비밀번호 변경
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
<div th:replace="fragments/footer :: footerFragment"></div>
</th:block>
<th:block layout:fragment="customScript">
<script>
$('#memberPw3').blur(function(){
	if($('#memberPw2').val() != $('#memberPw3').val()){
		if($('#memberPw3').val()!=''){
			
			alert("비밀번호가 일치하지 않습니다.");
			$('#memberPw3').val('');
			$('#memberPw3').focus();
		}
 	}
});

function sendIt() {
	var getCheck= RegExp(/^[a-zA-Z0-9]{4,12}$/);
	var getName= RegExp(/^[가-힣]+$/);
	var getNumber= RegExp(/^[0-9]+$/);
	var getMail = RegExp(/^[A-Za-z0-9_\.\-]+@[A-Za-z0-9\-]+\.[A-Za-z0-9\-]+/);

	//비밀번호
	if(!getCheck.test($("#memberPw2").val())) {
		alert("비밀번호를 영문과 숫자 4자이상 12자이하로 입력해주세요.");
		$("#memberPw2").val("");
		$("#memberPw2").focus();
		return false;
	}
	if ($("#memberId").val()==($("#memberPw2").val())) {
		alert("ID와 비밀번호가 같습니다!");
		$("#memberPw2").val("");
		$("#memberPw2").focus();
	}
}	
</script>
</th:block>
</html>